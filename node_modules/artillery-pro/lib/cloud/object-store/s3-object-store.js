/** @license
 * (c) 2021 Shoreditch Ops Ltd. All rights reserved.
 *
 * This file is part of Artillery Pro (https://artillery.io)
 *
 * NOTICE: All information contained herein is, and remains
 * the property of Shoreditch Ops Ltd. The intellectual and
 * technical concepts contained herein are proprietary to
 * Shoreditch Ops Ltd and are protected by copyright law.
 *
 * Modification and/or redistribution of this material is
 * strictly forbidden unless prior written permission is
 * obtained from Shoreditch Ops Ltd.
 *
 */
const S3=require("aws-sdk/clients/s3");class S3ObjectStore{constructor(opts){return this.bucket=opts.bucket,this.s3=new S3,this}async put(key,body,bucket){try{return this.s3.putObject({Body:body,Bucket:bucket||this.bucket,Key:key}).promise()}catch(s3Err){throw s3Err}}async get(key,b,opts){"object"==typeof b&&(opts=b);b="object"==typeof b?this.bucket:b;try{const res=await this.s3.getObject({Bucket:b,Key:key}).promise();return opts.json?JSON.parse(res.Body.toString()):res}catch(s3Err){throw s3Err}}async del(key,bucket){try{return await this.s3.deleteObject({Bucket:bucket||this.bucket,Key:key}).promise()}catch(s3Err){throw s3Err}}}module.exports={S3ObjectStore:S3ObjectStore};