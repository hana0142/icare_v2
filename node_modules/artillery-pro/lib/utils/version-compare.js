const cmp=require("semver-compare");function versionCompare(n1,n2){if(n1.indexOf("-")<0&&n2.indexOf("-")<0)return cmp(n1,n2);var aNoPre=n1.split("-")[0],c=n2.split("-")[0],c=cmp(aNoPre,c);if(0!==c)return c;if(Number(n1.split("-")[1])&&Number(n2.split("-")[1]))return Number(n1.split("-")[1])-Number(n2.split("-")[1]);if(n1.split("-")[1]){if(n2.split("-")[1]){const aPre=n1.split("-")[1],bPre=n2.split("-")[1];if(isNaN(parseInt(aPre))&&!isNaN(parseInt(bPre)))return-1;if(!isNaN(parseInt(aPre))&&isNaN(parseInt(bPre)))return 1;n1=parseInt(aPre.replace(/[A-Za-z-]/g,"")),n2=parseInt(bPre.replace(/[A-Za-z-]/g,""));return n2<n1?1:n1<n2?-1:0}return-1}return 1}if(require.main===module){const cases=[["2.0.0","1.7.7",1],["2.0.0","2.0.0",0],["2.0.0-dev10","2.0.0-dev7",1],["2.0.0","3.0.0-dev1",-1],["2.0.0-dev20","2.0.0",-1],["2.0.0-1","2.0.0-2",-1],["3.0.0-dev3","1.9.2",1],["2.0.0-0","2.0.0-dev10",1],["2.0.0-dev0","2.0.0-0",-1],["2.0.0-1","2.0.0-dev7",1]];for(const t of cases){const cmp=versionCompare(t[0],t[1]);cmp!==t[2]&&console.error("fail:",t,"-- expected: ",t[2],"got: ",cmp)}}module.exports=versionCompare;